#!/bin/bash
# variaveis default

instance_ca="default"
base_instance_ca="${base_openvpn}/server/${instance_ca}"
EASY_RSA="${base_openvpn}/easy-rsa"
KEY_DIR="${base_instance_ca}/keys"
KEY_SIZE="4096"
CA_EXPIRE="7300"
KEY_EXPIRE="7300"
KEY_COUNTRY="BR"
KEY_PROVINCE="SC"
KEY_CITY="ANY"
KEY_ORG="ANY"
KEY_EMAIL="ANY@ANY"
KEY_OU="ENTERPRISE"
KEY_NAME="servidor"
answer=" "
instance_file_vars_configuration="${EASY_RSA}/${instance_ca}/vars-${instance_ca}"
ip_addr=$(ip addr| grep eth0 | grep inet | cut -d ' ' -f 6)
proto=udp
port=1194
interface_vpn=tun-${instance_ca}
ca="${KEY_DIR}/ca.crt"
cert="${KEY_DIR}/${KEY_NAME}.crt"
key="${KEY_DIR}/${KEY_NAME}.key"
dh="${KEY_DIR}/dh${KEY_SIZE}.pem"
crl_verify="${KEY_DIR}/crl.pem"
topology="subnet"
range_server="192.168.224.0 255.255.252.0"
pool_persist="${instance_ca}/ipp-${instance_ca}.txt"
client_config_dir="${base_instance_ca}/ccd-${instance_ca}"
keepalive="keepalive 10 120"
tls_auth="${base_instance_ca}/ta/ta.key 0"
compress="comp-lzo"
persist_key="persist-key"
persist_tun="persist-tun"
status="/var/log/openvpn/openvpn-status-${instance_ca}.log"
log_append="/var/log/openvpn/openvpn-${instance_ca}.log"
verb="verb 3"
notify="explicit-exit-notify 1"
routes_clients=()
routes_server=()
counter=0
dns_server=("208.67.222.222" "208.67.220.220")
instance_ca_conf="${base_openvpn}/server/${instance_ca}.conf"
systemd_file_openvpn_service="/lib/systemd/system/openvpn@${instance_ca}.service"
client_name="cliente_0"
dst_cert_compact=${base_instance_ca}/certificates